function wcpr_pagination_basic(e,r){e=jQuery(e),r=jQuery(r);let t=!1;jQuery(document).on("click",".woocommerce-pagination a",(function(o){if(t)return!1;o.preventDefault(),o.stopPropagation();let i="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container),a=parseInt(i.offset().top)-200;window.scrollTo({top:a,behavior:"smooth"}),t=!0;let n=jQuery(this).attr("href");i.find(".wcpr-grid-overlay").length||i.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>');let c=i.find(".wcpr-grid-overlay");c.removeClass("wcpr-hidden"),jQuery.ajax({url:n,type:"get",success:function(e){if(e){let t=jQuery(e);"1"===woocommerce_photo_reviews_params.display?i.html(t.find(".wcpr-grid").html()):i.html(t.find(woocommerce_photo_reviews_params.container).html()),t.find(".woocommerce-pagination").length&&r.html(t.find(".woocommerce-pagination").html()),jQuery(document.body).trigger("wcpr_ajax_pagination_end")}c.addClass("wcpr-hidden"),t=!1},error:function(e){t=!1,c.addClass("wcpr-hidden")}})}));let o=e.find(".wcpr-filter-container");if(!o.length)return!1;jQuery(".et_divi_theme").length?jQuery("a.wcpr-filter-button").on("click",(function(i){i.preventDefault(),i.stopPropagation();let a=jQuery(this);if(t||0===parseInt(a.find(".wcpr-filter-button-count").html())&&!a.hasClass("wcpr-active"))return!1;t=!0,i.preventDefault();let n=jQuery(this).attr("href"),c="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container);if(0===c.length){if("1"===woocommerce_photo_reviews_params.display)e.append('<div class="'+woocommerce_photo_reviews_params.grid_class+'"><div class="wcpr-grid-overlay"></div></div>'),c=e.find(".wcpr-grid");else{"."===woocommerce_photo_reviews_params.container.substr(0,1)?e.append('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'):e.append('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'),c=e.find(woocommerce_photo_reviews_params.container)}e.find(".woocommerce-noreviews").hide()}c.find(".wcpr-grid-overlay").length||c.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>');let s=c.find(".wcpr-grid-overlay");s.removeClass("wcpr-hidden"),o.addClass("wcpr-filter-loading"),jQuery.ajax({url:n,type:"get",data:{wcpr_is_ajax:1},success:function(t){if(t){let i,a;t=t.replace(/(\r\n\t|\n|\r\t)/gm,"");let n=jQuery(t);"1"===woocommerce_photo_reviews_params.display?c.html(n.find(".wcpr-grid").html()):c.html(n.find(woocommerce_photo_reviews_params.container).html()),n.find(".woocommerce-pagination").length?r&&r.length?r.html(n.find(".woocommerce-pagination").html()):(e.append('<nav class="woocommerce-pagination">'+n.find(".woocommerce-pagination").html()+"</nav>"),r=e.find(".woocommerce-pagination")):r&&r.length>0&&(r.remove(),r=null),i=/<div class="wcpr-filter-container" style="display: none;">([^]+?)<\/div>/gm,a=i.exec(t),null!=a&&o.html(a[1]),jQuery(document.body).trigger("wcpr_ajax_pagination_end")}},error:function(e){console.log(e)},complete:function(){t=!1,s.addClass("wcpr-hidden"),o.removeClass("wcpr-filter-loading")}})})):jQuery(document).on("click","a.wcpr-filter-button",(function(i){i.preventDefault(),i.stopPropagation();let a=jQuery(this);if(t||0===parseInt(a.find(".wcpr-filter-button-count").html())&&!a.hasClass("wcpr-active"))return!1;t=!0,i.preventDefault();let n=jQuery(this).attr("href"),c="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container);if(0===c.length){if("1"===woocommerce_photo_reviews_params.display)e.append('<div class="'+woocommerce_photo_reviews_params.grid_class+'"><div class="wcpr-grid-overlay"></div></div>'),c=e.find(".wcpr-grid");else{"."===woocommerce_photo_reviews_params.container.substr(0,1)?e.append('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'):e.append('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'),c=e.find(woocommerce_photo_reviews_params.container)}e.find(".woocommerce-noreviews").hide()}c.find(".wcpr-grid-overlay").length||c.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>');let s=c.find(".wcpr-grid-overlay");s.removeClass("wcpr-hidden"),o.addClass("wcpr-filter-loading"),jQuery.ajax({url:n,type:"get",data:{wcpr_is_ajax:1},success:function(t){if(t){let i,a;t=t.replace(/(\r\n\t|\n|\r\t)/gm,"");let n=jQuery(t);"1"===woocommerce_photo_reviews_params.display?c.html(n.find(".wcpr-grid").html()):c.html(n.find(woocommerce_photo_reviews_params.container).html()),n.find(".woocommerce-pagination").length?r&&r.length?r.html(n.find(".woocommerce-pagination").html()):(e.append('<nav class="woocommerce-pagination">'+n.find(".woocommerce-pagination").html()+"</nav>"),r=e.find(".woocommerce-pagination")):r&&r.length>0&&(r.remove(),r=null),i=/<div class="wcpr-filter-container" style="display: none;">([^]+?)<\/div>/gm,a=i.exec(t),null!=a&&o.html(a[1]),jQuery(document.body).trigger("wcpr_ajax_pagination_end")}},error:function(e){console.log(e)},complete:function(){t=!1,s.addClass("wcpr-hidden"),o.removeClass("wcpr-filter-loading")}})}))}function wcpr_pagination_loadmore(e,r){e=jQuery(e),r=jQuery(r);let t=e.find(".wcpr-filter-container"),o=jQuery(".wcpr-load-more-reviews-cpage").val(),i=jQuery(".wcpr-load-more-reviews-product-id").val(),a=jQuery(".wcpr-load-more-reviews-rating").val(),n=jQuery(".wcpr-load-more-reviews-verified").val(),c=jQuery(".wcpr-load-more-reviews-image").val(),s=e.find(".woocommerce-noreviews"),p="1"===woocommerce_photo_reviews_params.display?e.find(".wcpr-grid"):e.find(woocommerce_photo_reviews_params.container);function m(){if(0===p.length){let r="1"===woocommerce_photo_reviews_params.display?".":woocommerce_photo_reviews_params.container.substr(0,1);p="."===r?"1"===woocommerce_photo_reviews_params.display?jQuery('<div class="'+woocommerce_photo_reviews_params.grid_class+'"></div>'):jQuery('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'):jQuery('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>'),e.append(p)}}if(o&&i){if(o>1){let r=e.find(".wcpr-load-more-reviews-button");jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_ajax_load_more_reviews",post_id:i,cpage:o,rating:a,verified:n,image:c,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},type:"POST",beforeSend:function(){r.addClass("wcpr-loading")},success:function(e){e.html&&(m(),p.html(e.html)),jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},complete:function(){r.removeClass("wcpr-loading")}})}jQuery(document).on("click",".wcpr-load-more-reviews-button:not(.shortcode-wcpr-load-more-reviews-button):not(.wcpr-loading)",(function(){let e=jQuery(this);return 2==woocommerce_photo_reviews_params.sort?(o++,1==o&&o++):(o--,1==o&&o--),o>-1&&jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_ajax_load_more_reviews",post_id:i,cpage:o,rating:a,verified:n,image:c,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},type:"POST",beforeSend:function(r){e.addClass("wcpr-loading")},success:function(r){r.html?(p.append(r.html),0==o&&e.parent().remove()):e.parent().remove(),jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},complete:function(){e.removeClass("wcpr-loading")}}),!1}));let l=!1;if(t.length){let d=t.find(".wcpr-filter-button-ul");jQuery(document).on("click","a.wcpr-filter-button",(function(w){let _=jQuery(this);if(l||0===parseInt(_.find(".wcpr-filter-button-count").html())&&!_.hasClass("wcpr-active"))return!1;o=0;let u=_.data("filter_type");switch(u){case"all":if(_.hasClass("wcpr-active"))return!1;a="";break;case"image":c=_.hasClass("wcpr-active")?"":1;break;case"verified":n=_.hasClass("wcpr-active")?"":1;break;default:if(_.hasClass("wcpr-active"))return!1;a=parseInt(u)}l=!0,w.preventDefault(),t.addClass("wcpr-filter-loading"),jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,type:"POST",data:{action:"wcpr_ajax_load_more_reviews",post_id:i,cpage:o,rating:a,verified:n,image:c,filter_type:u,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},success:function(i){2==woocommerce_photo_reviews_params.sort?o++:o--,i.html&&(s.hide(),m()),p.html(i.html),o=parseInt(i.cpage),0===r.length&&(e.append('<nav class="woocommerce-pagination"></nav>'),r=e.find(".woocommerce-pagination")),r.html(i.load_more_html);let a=i.update_count;if(a)for(let e in a)a.hasOwnProperty(e)&&t.find('.wcpr-filter-button[data-filter_type="'+e+'"]').find(".wcpr-filter-button-count").html(a[e]);switch(t.find(".wcpr-filter-rating-placeholder .wcpr-filter-button-count").html(a.all),u){case"all":d.find(".wcpr-filter-button").removeClass("wcpr-active"),_.addClass("wcpr-active"),t.find(".wcpr-filter-rating-placeholder").html(_.html());break;case"image":case"verified":_.hasClass("wcpr-active")?_.removeClass("wcpr-active"):_.addClass("wcpr-active");break;default:d.find(".wcpr-filter-button").removeClass("wcpr-active"),_.addClass("wcpr-active")}jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},error:function(e){console.log(e)},complete:function(){l=!1,t.removeClass("wcpr-filter-loading")}})}))}}}function viwcpr_flexslider(){"use strict";if(!jQuery(".woocommerce-photo-reviews-shortcode, .wcpr-review-title").length)return setTimeout((function(){viwcpr_flexslider()}),100),!1;jQuery(".woocommerce-photo-reviews-shortcode:not(.woocommerce-photo-reviews-slide)").each((function(){if(jQuery(this).addClass("woocommerce-photo-reviews-slide"),!jQuery(this).data("wcpr_slide"))return jQuery(this).addClass("woocommerce-photo-reviews-slide-none"),!0;let r=!1,t=Date.now(),o=jQuery(this).data("reviews_shortcode"),a=".shortcode-wcpr-grid .shortcode-wcpr-grid-item";if(jQuery(this).find(".shortcode-wcpr-reviews").length&&(a=".commentlist li"),!jQuery(this).find(".viwcpr-slide-wrap").length){jQuery(this).append('<div class="viwcpr-slide-wrap viwcpr-slide-wrap-'+t+'" data-id_css="viwcpr-slide-wrap-'+t+'"></div>');let e=jQuery(a).parent().clone();jQuery(a).parent().remove(),jQuery(this).find(".viwcpr-slide-wrap").css({width:"100%",position:"relative"}).append(e)}jQuery(this).closest(".rtl").length&&(r=!0);let n=jQuery(this).find(".viwcpr-slide-wrap"),c=n.innerWidth()?jQuery(this).parent().width():0,s=parseInt(o.cols_gap||20),p=parseInt(o.cols||4),m=parseInt(o.cols_mobile||1);c<600&&c>=480&&(p=p>3?3:p),c<480&&(p=m),jQuery(this).addClass("woocommerce-photo-reviews-slide-init");let l=c?(c-s*p)/p:200;n.addClass("viwcpr-slide-wrap-init").removeData("flexslider").viwcaio_flexslider({namespace:"villatheme-slider-",selector:a,animation:"slide",animationLoop:1,itemWidth:l,itemMargin:s,controlNav:!1,maxItems:p,reverse:r,rtl:r,move:p,touch:!0,slideshow:!1,start:function(r){r.count===r.move&&e(r,1,o,a).then((function(){r.setProps(0)}));let t=r.data("id_css"),i=`.${t} .viwse-suggestion-product-wrap{width: ${l}px !important;}`,n=0;for(let e=0;e<r.move;e++)n<r.find(a).eq(e).innerHeight()&&(n=r.find(a).eq(e).innerHeight()),r.find(a).eq(e).find(".shortcode-reviews-images-wrap-right img").length&&r.find(a).eq(e).find(".shortcode-reviews-images-wrap-right img").on("load",(function(){if(jQuery("#"+t).length||jQuery("head").append(`<style id="${t}"></style>`),jQuery(this).closest(a+":visible").length&&jQuery(this).closest(a).innerHeight()&&r.data("current_height")){let o=r.find(a).eq(e).innerHeight()+30;if(jQuery(this).closest(a).innerHeight()>parseFloat(r.data("current_height"))){let e=`.${t} .viwse-suggestion-product-wrap{width: ${l}px !important;}`;e+=`.${t} .villatheme-slider-viewport{height: ${o}px !important;}`,jQuery("#"+t).html(e),r.data("current_height",o)}}}));n&&(n+=30,i+=`.${t} .villatheme-slider-viewport{height: ${n}px !important;}`),jQuery("#"+t).length||jQuery("head").append(`<style id="${t}"></style>`),jQuery("#"+t).html(i),r.data("current_height",n)},before:function(e){e.removeClass("viwcpr-slide-wrap-init")},after:function(e){if(e.hasClass("viwcpr-slide-wrap-init"))return!0;e.addClass("viwcpr-slide-wrap-init");let r=e.data("id_css"),t=`.${r} .viwse-suggestion-product-wrap{width: ${l}px !important;}`,o=e.currentSlide*e.move,n=(e.currentSlide+1)*e.move,c=0;if(e.find(a).css({"margin-bottom":"0","margin-top":"0",width:`${l}px !important;`}),o===n)c=e.find(a).eq(o).innerHeight(),e.find(a).eq(o).find(".shortcode-reviews-images-wrap-right img").length&&e.find(a).eq(o).find(".shortcode-reviews-images-wrap-right img").on("load",(function(){if(jQuery("#"+r).length||jQuery("head").append(`<style id="${r}"></style>`),jQuery(this).closest(a+":visible").length&&jQuery(this).closest(a).innerHeight()&&e.data("current_height")){let t=e.find(a).eq(i).innerHeight()+30;if(jQuery(this).closest(a).innerHeight()>parseFloat(e.data("current_height"))){let o=`.${r} .viwse-suggestion-product-wrap{width: ${l}px !important;}`;o+=`.${r} .villatheme-slider-viewport{height: ${t}px !important;}`,jQuery("#"+r).html(o),e.data("current_height",t)}}}));else for(let t=o;t<n;t++)c<e.find(a).eq(t).innerHeight()&&(c=e.find(a).eq(t).innerHeight()),e.find(a).eq(t).find(".shortcode-reviews-images-wrap-right img").length&&e.find(a).eq(t).find(".shortcode-reviews-images-wrap-right img").on("load",(function(){if(jQuery("#"+r).length||jQuery("head").append(`<style id="${r}"></style>`),jQuery(this).closest(a+":visible").length&&jQuery(this).closest(a).innerHeight()&&e.data("current_height")){let o=e.find(a).eq(t).innerHeight()+30;if(jQuery(this).closest(a).innerHeight()>parseFloat(e.data("current_height"))){let t=`.${r} .viwse-suggestion-product-wrap{width: ${l}px !important;}`;t+=`.${r} .villatheme-slider-viewport{height: ${o}px !important;}`,jQuery("#"+r).html(t),e.data("current_height",o)}}}));c&&(c+=30,t+=`.${r} .villatheme-slider-viewport{height: ${c}px !important;}`,e.data("current_height",c)),jQuery("#"+r).length||jQuery("head").append(`<style id="${r}"></style>`),jQuery("#"+r).html(t)},end:function(r){let t=parseInt(r.find(".wcpr-reviews-total-pages").html()||r.closest(".woocommerce-photo-reviews-shortcode").find(".wcpr-reviews-total-pages").html()),i=Math.ceil(r.find(a).length/parseInt(o.comments_per_page||1));if(t>i){let t=r.limit;e(r,i,o,a).then((function(){r.setProps(t)}))}}})}));let e=async function(e,r,t,o){await new Promise((function(i){jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,type:"get",data:{action:"woocommerce_photo_reviews_shortcode_ajax_get_reviews",reviews_shortcode:JSON.stringify(t),wcpr_page:r+1,wcpr_image:e.data("wcpr_image"),wcpr_verified:e.data("wcpr_verified"),wcpr_rating:e.data("wcpr_rating")},beforeSend:function(){e.closest(".woocommerce-photo-reviews-shortcode").addClass("woocommerce-photo-reviews-shortcode-loading")},success:function(r){let t=jQuery("<div></div>");t.append(r.html),t.find(o).each((function(r,t){e.addSlide(jQuery(t))})),e.closest(".woocommerce-photo-reviews-shortcode").removeClass("woocommerce-photo-reviews-shortcode-loading"),i(e)},error:function(r){i(e),e.closest(".woocommerce-photo-reviews-shortcode").removeClass("woocommerce-photo-reviews-shortcode-loading")}})}))};jQuery(".wcpr-grid .wcpr-grid-item").last().css("display","inline-block"),jQuery(".shortcode-wcpr-grid .shortcode-wcpr-grid-item").last().css("display","inline-block"),jQuery("#wcpr_thank_you_message").length&&setTimeout((function(){jQuery(".reviews_tab a").trigger("click"),setTimeout((function(){window.scrollTo({top:jQuery("#review_form").offset().top-450})}))}),100)}function wcpr_helpful_button(){"use strict";jQuery(document).on("click",[".wcpr-single-product-summary .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)",".shortcode-wcpr-single-product-summary .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)"].join(","),(function(e){if(!woocommerce_photo_reviews_params.ajax_atc)return!0;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let r=jQuery(this),t=jQuery(this).closest("form.cart");if(r.addClass("vi-wcaio-product-bt-atc-loading"),!t.length||r.hasClass("disabled"))return r.removeClass("vi-wcaio-product-bt-atc-loading"),!1;if(t.hasClass(".variations_form")){let e=parseInt(t.find("input[name=variation_id]").val());if(!e||e<=0)return r.removeClass("vi-wcaio-product-bt-atc-loading"),!1}let o=t.find("input[name=product_id]").val();if(o||(o=t.find("[name=add-to-cart]").val()),!o||t.find('[name="woopb-add-to-cart"]').length)return r.attr("type","submit").trigger("click"),!1;let i={};t.find("select, textarea, input").each((function(){if(jQuery(this).prop("disabled"))return!0;if(["checkbox","radio"].indexOf(jQuery(this).attr("type"))>-1&&!jQuery(this).prop("checked"))return!0;let e=jQuery(this).attr("name");e&&(i[e]=jQuery(this).val())})),i["add-to-cart"]||(i["add-to-cart"]=t.find("[name=add-to-cart]").val()),jQuery(document.body).trigger("adding_to_cart",[r,i]),woocommerce_photo_reviews_params.ajax_atc_event||(woocommerce_photo_reviews_params.ajax_atc_event=[]),woocommerce_photo_reviews_params.ajax_atc_event.push({type:"post",url:woocommerce_photo_reviews_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcpr_add_to_cart"),data:i,beforeSend:function(){r.removeClass("added").addClass("loading")},success:function(e){return e.error?(location.href=window.location.href,!1):"yes"===woocommerce_photo_reviews_params.cart_redirect_after_add&&woocommerce_photo_reviews_params.cart_url?(window.location=woocommerce_photo_reviews_params.cart_url,!1):(jQuery(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,r]),woocommerce_photo_reviews_params.woocommerce_enable_ajax_add_to_cart||jQuery(document.body).trigger("wc_fragment_refresh"),jQuery(document.body).trigger("viwcpr_added_to_cart",[e.fragments,e.cart_hash,r]),woocommerce_photo_reviews_params.ajax_atc_event.shift(),void(woocommerce_photo_reviews_params.ajax_atc_event.length>0&&jQuery.ajax(woocommerce_photo_reviews_params.ajax_atc_event[0])))},complete:function(e){r.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added")}}),1===woocommerce_photo_reviews_params.ajax_atc_event.length&&jQuery.ajax(woocommerce_photo_reviews_params.ajax_atc_event[0])})),jQuery(document).on("click",".wcpr-comment-helpful-button",(function(e){e.stopPropagation();let r=jQuery(this),t=r.hasClass("wcpr-comment-helpful-button-up-vote")?"up":"down",o=r.closest(".wcpr-comment-helpful-button-container"),i=o.data("comment_id");"up"===t&&o.hasClass("wcpr-comment-helpful-button-voted-up")||"down"===t&&o.hasClass("wcpr-comment-helpful-button-voted-down")||o.hasClass("wcpr-comment-helpful-button-voting")||(o.addClass("wcpr-comment-helpful-button-voting"),jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_helpful_button_handle",vote:t,comment_id:i},type:"POST",success:function(e){if("success"===e.status&&(o.find(".wcpr-comment-helpful-button-up-vote-count").html(parseInt(e.up)),o.find(".wcpr-comment-helpful-button-down-vote-count").html(parseInt(e.down)),"up"===t?o.removeClass("wcpr-comment-helpful-button-voted-down").addClass("wcpr-comment-helpful-button-voted-up"):o.removeClass("wcpr-comment-helpful-button-voted-up").addClass("wcpr-comment-helpful-button-voted-down"),o.parent().hasClass("reviews-content-right-meta")||o.parent().hasClass("shortcode-reviews-content-right-meta"))){let r=jQuery('.wcpr-comment-helpful-button-container[data-comment_id="'+i+'"]');r.find(".wcpr-comment-helpful-button-up-vote-count").html(parseInt(e.up)),r.find(".wcpr-comment-helpful-button-down-vote-count").html(parseInt(e.down)),"up"===t?r.removeClass("wcpr-comment-helpful-button-voted-down").addClass("wcpr-comment-helpful-button-voted-up"):r.removeClass("wcpr-comment-helpful-button-voted-up").addClass("wcpr-comment-helpful-button-voted-down")}},error:function(){},complete:function(){o.removeClass("wcpr-comment-helpful-button-voting")}}))}))}function viSwipeDetect(e,r){var t,o,i,a,n,c,s=e,p=r||function(e){};s.addEventListener("touchstart",(function(e){var r=e.changedTouches[0];t="none",o=r.pageX,i=r.pageY,c=(new Date).getTime()}),!1),s.addEventListener("touchmove",(function(e){e.preventDefault()}),!1),s.addEventListener("touchend",(function(e){var r=e.changedTouches[0];a=r.pageX-o,n=r.pageY-i,(new Date).getTime()-c<=300&&(Math.abs(a)>=150&&Math.abs(n)<=100?t=a<0?"left":"right":Math.abs(n)>=150&&Math.abs(a)<=100&&(t=n<0?"up":"down")),p(t)}),!1)}jQuery(window).on("elementor/frontend/init",(()=>{"use strict";elementorFrontend.hooks.addAction("frontend/element_ready/woocommerce-photo-reviews.default",(function(e){window.elementor&&(wcpr_helpful_button(),viwcpr_flexslider())}))})),jQuery(document).ready((function(e){"use strict";let r=1==woocommerce_photo_reviews_params.image_caption_enable,t=woocommerce_photo_reviews_params.i18n_image_caption;function o(e,o,i=""){let a,n=`<img title="${o}" src="${e}" class="wcpr-selected-image-preview">`;return e.indexOf("data:video/")>-1&&(n=`<video class="wcpr-selected-image-preview" height="100%" width="100%" src="${e}" controls >${o}</video>`),a=i?`<div class="wcpr-selected-image">${n}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name wcpr-comment-form-error" >${i}</div></div></div>`:r?`<div class="wcpr-selected-image">${n}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name" title="${o}">${o}</div><input class="wcpr-selected-image-caption" type="text" name="wcpr_image_caption[]" placeholder="${t}"></div></div>`:`<div class="wcpr-selected-image">${n}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name" title="${o}">${o}</div></div></div>`,a}wcpr_helpful_button(),viwcpr_flexslider();let i=woocommerce_photo_reviews_params.max_files;e("#commentform").on("change",".wcpr_image_upload",(function(r){if(e(this).parent().find(".wcpr-selected-image-container").html(""),this.files.length>i)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_max_files),e(this).val(""),!1;this.files.length>0&&(jQuery(".wcpr-comment-form-error-wraps").addClass("wcpr-hidden"),function(r){let t=1024*parseFloat(woocommerce_photo_reviews_params.max_file_size);for(let a=0;a<r.files.length;a++){var i=new FileReader;i.onload=function(i){let n="";r.files[a].size>t?n=woocommerce_photo_reviews_params.warning_max_file_size.replace("%file_name%",r.files[a].name):-1===woocommerce_photo_reviews_params.upload_allow.indexOf(r.files[a].type)&&(n=woocommerce_photo_reviews_params.warning_upload_allow.replace("%file_name%",r.files[a].name)),e(r).parent().find(".wcpr-selected-image-container").append(o(i.target.result,r.files[a].name,n))},i.readAsDataURL(r.files[a])}}(this))})),jQuery(document).on("click",".wcpr_image_upload_button",(function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).parent().find(".wcpr_image_upload").trigger("click")})),e("#commentform").find('input[type="submit"]').on("click",(function(r){let t=e(this);if(t.hasClass("viwcpr_form_checked")||!e("#wcpr_image_upload_nonce").length)return!0;let o=t.closest("form"),a=o.find('textarea[id="comment"]')||o.find('textarea[name="comment"]'),n=o.find('input[name="author"]'),c=o.find('input[name="email"]');jQuery(".wcpr-comment-form-error-wraps").addClass("wcpr-hidden"),jQuery(".wcpr-comment-form-notify-wraps").addClass("wcpr-hidden");let s=o.find("#rating"),p=s.val();if(s.length>0&&!p&&"yes"===woocommerce_photo_reviews_params.review_rating_required)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_rating_text),r.preventDefault(),!1;if(a.length>0){let e=a.val();if(!e&&1!=woocommerce_photo_reviews_params.allow_empty_comment)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_comment_text),r.preventDefault(),a.focus(),!1;let t=parseInt(woocommerce_photo_reviews_params.minimum_comment_length);if(t&&t>e.length)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_minimum_comment_text),r.preventDefault(),a.focus(),!1}if(n.length>0&&n.attr("required")&&!n.val())return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_name_text),r.preventDefault(),n.focus(),!1;if(c.length>0&&c.attr("required")&&!c.val())return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_email_text),r.preventDefault(),c.focus(),!1;if(!1===o.find('input[name="wcpr_gdpr_checkbox"]').prop("checked"))return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_gdpr),r.preventDefault(),!1;if("on"===woocommerce_photo_reviews_params.enable_photo){o.attr("enctype")&&"multipart/form-data"===o.attr("enctype")||o.attr("enctype","multipart/form-data");let e=o.find(".wcpr_image_upload");if(e.length>0){let t=e.get(0).files,o=parseInt(t.length);if("on"===woocommerce_photo_reviews_params.required_image&&0===o)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_required_image),r.preventDefault(),!1;if(o>i)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_max_files),r.preventDefault(),!1;let a=[],n=1024*parseFloat(woocommerce_photo_reviews_params.max_file_size);if(jQuery.each(t,(function(e,r){if(r.size>n)return a.push("<p>"+woocommerce_photo_reviews_params.warning_max_file_size.replace("%file_name%",r.name)+"</p>"),!0;-1===woocommerce_photo_reviews_params.upload_allow.indexOf(r.type)&&a.push("<p>"+woocommerce_photo_reviews_params.warning_upload_allow.replace("%file_name%",r.name)+"</p>")})),a.length)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(a.join("")),r.preventDefault(),!1}else if("on"===woocommerce_photo_reviews_params.required_image)return jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_required_image),r.preventDefault(),!1}if(jQuery(".wcpr-comment-form-notify-wraps").removeClass("wcpr-hidden"),woocommerce_photo_reviews_params.restrict_number_of_reviews){t.attr("type","button"),async function(){let r="",t=new FormData(o[0]);return a.val()&&!o.find('textarea[name="comment"]').val()&&t.set("comment",a.val()),await new Promise((function(i){e.ajax({type:"post",url:woocommerce_photo_reviews_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcpr_restrict_number_of_reviews"),processData:!1,cache:!1,contentType:!1,data:t,success:function(e){e.error?r=e.error:(e.remove_upload_file&&o.find(".wcpr_image_upload").val(""),e.img_id&&o.append(`<input type="hidden" name="wcpr_image_upload_id" value="${e.img_id}">`)),i(r)},error:function(e){r="-1"===e.responseText?e.statusText:e.responseText,i(r)}})})),r}().then((function(e){if(t.attr("type","submit"),e)return jQuery(".wcpr-comment-form-notify-wraps").addClass("wcpr-hidden"),jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(e),r.preventDefault(),!1;t.addClass("viwcpr_form_checked").trigger("click")}))}}));let a=woocommerce_photo_reviews_params.hasOwnProperty("comments_container_id")?woocommerce_photo_reviews_params.comments_container_id:"comments",n=e("#"+a);function c(){if(woocommerce_photo_reviews_params.pagination_ajax&&n.length){let e=n.find(".woocommerce-pagination");woocommerce_photo_reviews_params.loadmore_button?(e.html(jQuery(".wcpr-load-more-reviews-button-modal").html()),wcpr_pagination_loadmore(n,n.find(".woocommerce-pagination"))):wcpr_pagination_basic(n,n.find(".woocommerce-pagination"))}else jQuery(".et_divi_theme").length&&jQuery("a.wcpr-filter-button").on("click",(function(){location.href=jQuery(this).attr("href")}))}function s(){n.prepend(e(".wcpr-filter-container")).prepend(e(".wcpr-overall-rating-and-rating-count")).prepend(e(".woocommerce-Reviews-title").eq(0))}n.length>0?(s(),c()):e(document).on("skeleton-loaded",(function(){n=e("#"+a),s(),c()})),e(document).on("click",".reviews_tab",(function(){n=e("#"+a),s()}))}));